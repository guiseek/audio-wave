(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))n(t);new MutationObserver(t=>{for(const r of t)if(r.type==="childList")for(const d of r.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&n(d)}).observe(document,{childList:!0,subtree:!0});function i(t){const r={};return t.integrity&&(r.integrity=t.integrity),t.referrerPolicy&&(r.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?r.credentials="include":t.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(t){if(t.ep)return;t.ep=!0;const r=i(t);fetch(t.href,r)}})();function h(e,o={}){return Object.assign(document.createElement(e),o)}function f(e){return new AudioContext().decodeAudioData(e)}function u(e,o=document.body){return o.querySelector(e)}function y(e){return new Promise((o,i)=>{const n=new FileReader;n.onerror=i,n.onloadend=()=>o(n.result),n.readAsArrayBuffer(e)})}const p=e=>{const o=Math.round(e.sampleRate/70),i=e.getChannelData(0),n=[];for(let t=0;t<i.length;t+=o)n.push([t/i.length,i[t]+1]);return n},g=e=>o=>{const{width:i,height:n}=e.canvas;e.clearRect(0,0,i,n),e.strokeStyle="black",e.lineWidth=2,e.beginPath(),o.forEach(([t,r])=>{e.lineTo(t*i,r*(n/2))}),e.stroke()};const _=u("main"),l=u("object"),c=u("canvas"),b=16/9,s={hide(){l.hidden=!0},show(){l.hidden=!1}};c.width=_.clientWidth;c.height=c.width/b;const a=c.getContext("2d"),m=h("input",{type:"file",accept:"audio/mp3,audio/ogg",onchange(){const[e]=Array.from(m.files??[]);e&&a&&(s.show(),y(e).then(f).then(p).then(g(a)).then(s.hide))}});document.body.appendChild(m);const w=["Beethoven_-_Moonlight_Sonata.ogg","Beethoven_-_Moonlight_Sonata.mp3","Mozart_-_Magic_Flute_Overture.ogg","Mozart_-_Magic_Flute_Overture.mp3"];w.map(e=>{document.body.append(h("button",{innerText:e,onclick(){a&&(s.show(),fetch(e).then(o=>o.arrayBuffer()).then(f).then(p).then(g(a)).then(s.hide))}}))});
